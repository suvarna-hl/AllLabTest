const labTestsByCity = {
  Gurgaon: [
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
     {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
     {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
  ],

  Delhi: [
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Liver Function Test",
      description:
        "Also known as : Liver profile, LFT, Liver Function Test, Basic Liver Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "SGOT (AST)",
        "SGPT (ALT)",
        "Alkaline Phosphatase",
        "Total Bilirubin",
        "Direct Bilirubin",
        "Albumin",
        "Globulin",
        "A/G Ratio",
      ],
    },
    {
      title: "Complete Blood Count",
      description:
        "Also known as : CBC, Complete Hemogram, Full Blood Count, Blood Panel",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Hemoglobin",
        "RBC Count",
        "WBC Count",
        "Platelet Count",
        "Hematocrit",
        "MCV",
        "MCH",
        "MCHC",
      ],
    },
    {
      title: "Urine Routine & Microscopy Extended",
      description:
        "Also known as : pH Urine, Urine routine test, Leucocyte Esterase",
      tests: "3 Tests",
      price: "₹ 349",
      parameters: [
        "Urine pH",
        "Protein",
        "Glucose",
        "Ketones",
        "Bilirubin",
        "Urobilinogen",
        "Pus Cells",
        "RBCs",
      ],
    },
  ],

  Noida: [
    {
      title: "Complete Blood Count",
      description: "Also known as: CBC",
      tests: "3 Tests",
      price: "₹329", 
      parameters: ["Hemoglobin", "RBC Count", "WBC Count", "Platelet Count"],
    },
    {
      title: "Urine Routine & Microscopy",
      description: "Also known as: Urine R/M",
      tests: "10 Tests",
      price: "₹299",
      parameters: ["pH", "Protein", "Glucose", "Ketones", "RBC", "Pus Cells"],
    },
  ],
};

let activeCity = "Gurgaon";
let activeFilter = "PROFILE";
let itemsToShow = 10;
const itemsPerLoad = 10;

document.addEventListener("DOMContentLoaded", () => {
  const buttons = document.querySelectorAll(".filter-btn");
  const container = document.getElementById("rowsContainer");
  const template = document.getElementById("rowTemplate");
  const lapview = document.getElementById("lapview");
  const loadMoreBtn = document.getElementById("loadbtn");

  const profileHeader = document.getElementById("profileHeader");
  const parameterHeader = document.getElementById("parameterHeader");

  function updateHeaders() {
    if (activeFilter === "PARAMETER") {
      profileHeader.style.display = "none";
      testsHeader.style.display = "none";
      parameterHeader.style.display = "grid";
      lapview.classList.add("parameter-mode");
      params.textContent = "Parameters";
    } else if (activeFilter === "PACKAGES") {
      profileHeader.style.display = "grid";
      parameterHeader.style.display = "none";
      testsHeader.style.display = "grid";
      lapview.classList.remove("parameter-mode");
      testsHeader.textContent = "Total Tests";
      priceHeader.textContent = "Price in Gurgaon";
    } else {
      profileHeader.style.display = "grid";
      parameterHeader.style.display = "none";
      testsHeader.style.display = "grid";
      lapview.classList.remove("parameter-mode");
      testsHeader.textContent = "Total Tests";
      priceHeader.textContent = "Price in Gurgaon";
    }
  }

  function renderRows() {
    container.innerHTML = "";
    const cityTests = labTestsByCity[activeCity] || [];
    const testsToRender = cityTests.slice(0, itemsToShow);

    testsToRender.forEach((test, index) => {
      const clone = template.content.cloneNode(true);

      clone.querySelector("h3").textContent = test.title;

      const descriptionElement = clone.querySelector(".description");
      if (activeFilter === "PACKAGES") {
        descriptionElement.style.display = "none";
      } else {
        descriptionElement.style.display = "";
        descriptionElement.textContent = test.description;
      }

      const testCount = clone.querySelector(".test-count");
      const rightCell = clone.querySelector(".right-cell");

      testCount.style.display = "";
      rightCell.innerHTML = "";
      rightCell.textContent = "";

      if (activeFilter === "PARAMETER") {
        testCount.style.display = "none";

        const paramWrap = document.createElement("div");
        paramWrap.className = "parameter-wrapper";

        test.parameters.forEach((p) => {
          const chip = document.createElement("span");
          chip.className = "parameter-chip";
          chip.textContent = p;
          paramWrap.appendChild(chip);
        });

        rightCell.appendChild(paramWrap);
      } else {
        testCount.textContent = test.tests;
        rightCell.textContent = test.price;
      }
      const rowDivider = clone.querySelector(".row-divider");
      if (index === 0) {
        rowDivider.style.display = "none";
      }

      container.appendChild(clone);
    });

    updateLoadMoreButton();
  }

  const citySelect = document.getElementById("citySelect");
  citySelect.addEventListener("change", (e) => {
    activeCity = e.target.value;
    renderRows();
  });

  function updateLoadMoreButton() {
    const loadMoreContainer = document.querySelector(".loadbt");
    
    const cityTests = labTestsByCity[activeCity] || [];
    if (itemsToShow >= cityTests.length) {
      loadMoreContainer.style.display = "none";
    } else {
      loadMoreContainer.style.display = "flex";
    }
  }

  function updateButtons() {
    buttons.forEach((btn) => {
      const active = btn.textContent.trim() === activeFilter;
      btn.style.background = active ? "#00A0A8" : "#EBEBEB";
      btn.style.color = active ? "#fff" : "#5A5E65";
    });
  }

  loadMoreBtn.addEventListener("click", () => {
    itemsToShow += itemsPerLoad;
    renderRows();
  });

  buttons.forEach((btn) => {
    btn.addEventListener("click", () => {
      activeFilter = btn.textContent.trim();
      itemsToShow = 10;
      updateHeaders();
      renderRows();
      updateButtons();
    });
  });

  updateHeaders();
  renderRows();
  updateButtons();
});
